<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>IYS PM Summary â€“ Questions</title>

<style>
  /* ================= PAGE BASE ================= */
  body {
    font-family: Arial, sans-serif;
    background: #fff;
  }

  .ojt-page {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px 10px;
    font-size: 14px;
    line-height: 1.6;
    color: #000;
  }

  /* ================= IMAGE ================= */
  .image-block {
    text-align: center;
    margin-bottom: 26px;
  }

  .image-block img {
    max-width: 100%;
    border: 1px solid #000;
  }

  .caption {
    font-size: 12px;
    color: #555;
    margin-top: 6px;
  }

  /* ================= QUESTIONS ================= */
  ol.question-list {
    padding-left: 20px;
  }

  ol.question-list li {
    margin-bottom: 18px;
  }

  /* ================= RADIO GROUP ================= */
  .radio-group {
    margin-top: 6px;
  }

  .radio-group label {
    display: inline-block;
    margin-right: 24px;
    white-space: nowrap;
  }

  /* ================= FOOTER ================= */
  .page-footer {
    margin-top: 28px;
    font-size: 11px;
    color: #666;
    text-align: right;
  }
</style>
</head>

<body>

<div class="ojt-page">

  <!-- ================= IMAGE ================= -->
  <div class="image-block">
    <!-- CHANGE IMAGE FILE NAME AS NEEDED -->
    <img src="/static/summary.png"
         alt="IYS PM Summary Screen">
  </div>

  <!-- ================= QUESTIONS ================= -->
  <ol class="question-list">

    <!-- QUESTION 1 -->
    <li>
      When was this data last refreshed?
      <div class="radio-group">
        <label>
          <input type="radio" name="refresh_time" value="2040">
          20:40
        </label>
        <label>
          <input type="radio" name="refresh_time" value="30042025">
          30/04/2025
        </label>
        <label>
          <input type="radio" name="refresh_time" value="both">
          Both
        </label>
      </div>
    </li>

    <!-- QUESTION 2 -->
    <li>
      If you see <strong>"Total PM: 40"</strong> but only count <strong>25</strong>
      in the deployment list, what should you do?
      <div class="radio-group">
        <label>
          <input type="radio" name="pm_excess_action" value="verify">
          Verify where the excess is from
        </label>
        <label>
          <input type="radio" name="pm_excess_action" value="undeploy">
          Undeploy all the excess PMs
        </label>
        <label>
          <input type="radio" name="pm_excess_action" value="both">
          Both
        </label>
      </div>
    </li>

  </ol>

  <div class="page-footer">12 | Page</div>

</div>
<script>
(function () {

  const PAGE_CODE = "YSS_012";   // change to YSS_014 for page 14
  const SAVED_DATA = {{ saved_data | default({}) | tojson | safe }};

  const fields = document.querySelectorAll(
    "input[name], textarea[name], select[name]"
  );

  // Restore
  fields.forEach(el => {
    if (!SAVED_DATA.hasOwnProperty(el.name)) return;

    if (el.type === "radio") {
      el.checked = (el.value === SAVED_DATA[el.name]);
    } else if (el.type === "checkbox") {
      el.checked = SAVED_DATA[el.name] === "true";
    } else {
      el.value = SAVED_DATA[el.name];
    }
  });

  let timer = null;

  function autosave(el) {
    fetch("/training/autosave", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        page_code: PAGE_CODE,
        field: el.name,
        value: el.type === "checkbox" ? String(el.checked) : el.value
      })
    });
  }

  fields.forEach(el => {
    const handler = () => {
      clearTimeout(timer);
      timer = setTimeout(() => autosave(el), 200);
    };
    el.addEventListener("input", handler);
    el.addEventListener("change", handler);
  });

})();
</script>

</body>
</html>
