<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mentor Dashboard</title>

  <style>
    body { font-family: Arial, sans-serif; margin: 0; background:#fff; color:#000; }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 16px; }
    .topbar { display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap; }
    .btn {
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid #444;
      text-decoration: none;
      color: #000;
      background: #E1C233;
      font-weight: 600;
      cursor: pointer;
      display: inline-block;
    }
    .btn:active { transform: translateY(1px); }
    .filters { margin: 14px 0; display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    input, select {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #444;
      font-size: 14px;
    }
    table { width:100%; border-collapse: collapse; margin-top: 8px; }
    th, td { border:1px solid #000; padding: 8px; text-align:left; vertical-align: middle; }
    th { background:#f2f2f2; }
    .pill {
      display:inline-block; padding:3px 8px; border-radius:999px;
      border:1px solid #444; font-size: 12px; font-weight: 700;
    }
    .yes { background:#d1fae5; }
    .no  { background:#fee2e2; }
    .muted { color:#666; font-size: 12px; }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="topbar">
      <h2 style="margin:0;">Mentor Dashboard</h2>
      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <a class="btn" href="{{ url_for('home.role_selection') }}">Home</a>
      </div>
    </div>

    <form method="get" class="filters">
      <input name="q" value="{{ q }}" placeholder="Search trainee name">
      <select name="role">
        <option value="" {% if role_filter=="" %}selected{% endif %}>All</option>
        <option value="YAS" {% if role_filter=="YAS" %}selected{% endif %}>YAS</option>
        <option value="YSS" {% if role_filter=="YSS" %}selected{% endif %}>YSS</option>
      </select>
      <button class="btn" type="submit">Search</button>
      <span class="muted">Mentor view is read-only unless page is whitelisted.</span>
    </form>

    <table>
      <tr>
        <th style="width:26%;">Name</th>
        <th style="width:8%;">Role</th>
        <th style="width:10%;">Submitted</th>
        <th style="width:18%;">Submitted At</th>
        <th style="width:18%;">Last Updated</th>
        <th style="width:20%;">Action</th>
      </tr>

      {% for t in trainees %}
      <tr>
        <td>{{ t.name }}</td>
        <td>{{ t.role }}</td>
        <td>
          {% if t.submitted %}
            <span class="pill yes">YES</span>
          {% else %}
            <span class="pill no">NO</span>
          {% endif %}
        </td>
        <td>{{ t.submitted_at or "" }}</td>
        <td>{{ t.last_updated or "" }}</td>
        <td style="display:flex; gap:8px; flex-wrap:wrap;">
          <a class="btn" href="{{ url_for('training.mentor_view_page', employee_id=t.id, page=1) }}">Open Booklet</a>
        </td>
      </tr>
      {% endfor %}
    </table>

  </div>
</body>
</html>
